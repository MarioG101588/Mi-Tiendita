<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Permissions-Policy" content="unload=(), camera=(), microphone=(), geolocation=()">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https:; style-src 'self' 'unsafe-inline' https:;">
    <title>Sistema POS - El Arrendajo Azul</title>
    <script>
        (function() {
            const originalWarn = console.warn;
            const originalInfo = console.info;
            
            console.warn = function(...args) {
                const mensaje = args.join(' ');
                if (mensaje.includes('Permissions policy violation') || 
                    mensaje.includes('unload is not allowed') ||
                    mensaje.includes('jquery.js:1040')) {
                    return; // Suprimir warnings de unload
                }
                originalWarn.apply(console, args);
            };
            
            console.info = function(...args) {
                const mensaje = args.join(' ');
                if (mensaje.includes('The current domain is not authorized for OAuth') ||
                    mensaje.includes('Add your domain (127.0.0.1)') ||
                    mensaje.includes('iframe.js:310')) {
                    return; // Suprimir info de Firebase OAuth para localhost
                }
                originalInfo.apply(console, args);
            };
        })();
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="./Css/estilo.css">
    
</head>
<body>
    <!-- Template para modal de medios de pago -->
    <template id="modalMediosPagoTemplate">
        <div class="modal-pago-container">
            <div class="pago-opcion" onclick="window.seleccionarMedioPagoModal('Efectivo')">
                <img src="./pngs/efectivo.png" alt="Efectivo" class="icono-pago-principal">
                <span class="texto-pago">Efectivo</span>
            </div>
            <div class="pago-opcion" onclick="window.seleccionarMedioPagoModal('Nequi')">
                <img src="./pngs/nequi.png" alt="Nequi" class="icono-pago-principal">
                <span class="texto-pago">Nequi</span>
            </div>
            <div class="pago-opcion" onclick="window.seleccionarMedioPagoModal('Daviplata')">
                <img src="./pngs/daviplata.png" alt="DaviPlata" class="icono-pago-principal">
                <span class="texto-pago">DaviPlata</span>
            </div>
        </div>
    </template>

    <div class="containerPendientes d-none" id="containerPendientes">
    
    <!-- Logo del local -->
    <div class="logo-container-pendientes mb-3">
        <img src="./pngs/LogoLocal.png" alt="Logo El Arrendajo Azul" class="logo-pendientes" />
    </div>
    
    <h1 class="titulo-superior">📋 Cuentas Pendientes Por Cobrar</h1>
    <div id="cuentasPendientesTurno" class="mt-1 mb-2"></div>
    <div class="d-flex flex-wrap gap-2 mt-3">
        <button onclick="mostrarContainer('container2')" class="btn btn-primary flex-fill">
            ↩️ Ir a INICIO
        </button>
        <button onclick="window.mostrarHistorialAbonosGeneral()" class="btn btn-info flex-fill">
            📊 Historial de Abonos
        </button>
        <!--<button onclick="window.mostrarCuentasPendientes();" class="btn btn-outline-secondary flex-fill">
            🔄 Actualizar Lista
        </button>-->
    </div>
</div>

    <div class="container container-login container-visible" id="container">
    <h1>Inicio de Sesión</h1>
    
    <!-- Logo del local -->
    <div class="logo-container mb-4">
        <img src="./pngs/LogoLocal.png" alt="Logo El Arrendajo Azul" class="logo-login" />
    </div>
    
    <button id="loginButton" class="btn-login">Iniciar de sesión</button>
    <div id="loginForm" class="d-none">
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="emailinicio" placeholder="name@example.com">
            <label for="emailinicio">Tu Correo Electronico</label>
        </div>
        <div class="form-floating mb-3">
            <input type="password" class="form-control" id="passwordinicio" placeholder="Password">
            <label for="passwordinicio">Tu Contraseña</label>
        </div>
        <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="recordarDatos">
        <label class="form-check-label" for="recordarDatos">Recordar datos</label>
    </div>
        <div class="d-flex flex-wrap gap-2">
            <button id="btnIniciarSesion" class="btn btn-primary flex-fill">Siguiente</button>
            <button id="closeButton" class="btn btn-secondary flex-fill">Cerrar</button>
        </div>
    </div>
</div>
    </div>
<div class="container1 d-none" id="container1">
    <h1 class="titulo-superior">Ventas</h1>
    
    <!-- Logo del local -->
    <div class="logo-container-ventas mb-3">
        <img src="./pngs/LogoLocal.png" alt="Logo El Arrendajo Azul" class="logo-ventas" />
    </div>
    
    <div class="buscador-container">
        <div class="buscador-header">
            <h5 class="buscador-titulo">🔍 Buscar Productos</h5>
        </div>
        <div class="buscador-input-container">
            <input type="text" id="campoBusqueda1" class="buscador-input" placeholder="🔍 Toca aquí para buscar productos..." readonly style="cursor: pointer;" tabindex="-1">
            <div class="buscador-icon">🔍</div>
        </div>
    </div>
    <div id="resultadoBusqueda1" class="resultado-busqueda d-none" style="display: none !important;"></div>
    <div id="carritoVenta"></div>
    <div class="d-flex justify-content-center">
        <button onclick="mostrarContainer('container2')" class="btn btn-primary">
            📋 Ir a INICIO
        </button>
    </div>
    <br><br><br><br>        <button onclick="exportarInventarioAExcel()">Exportar Inventario a Excel</button>
        <input type="file" accept=".xlsx, .xls" onchange="importarInventarioDesdeExcel(event)">
    <button onclick="sincronizarPreciosDesdeInventario()">🔄 Sincronizar productos y precios</button>

</div>
</div>
<div class="container2 d-none" id="container2">
    <!-- Logo del local -->
    <div class="logo-container-main mb-3">
        <img src="./pngs/LogoLocal.png" alt="Logo El Arrendajo Azul" class="logo-main" />
    </div>
    
    <h2 class="titulo-superior">INICIO</h2>
    <h1 class="titulo-superior">Cigarreria y Algo Mas El Arrendajo Azul</h1>
    <h3 class="titulo-superior">Cuentas En Turno</h3>
    <div id="cuentasActivasTurno" class="mt-1 mb-2"></div>
    <div class="d-flex flex-wrap gap-2">
        <button onclick="mostrarContainer('container1')" class="btn btn-success flex-fill">
            🛒 Hacer Venta
        </button>
        <button onclick="mostrarContainer('containerCompras')" class="btn btn-warning flex-fill">
            🛒 Registrar Compra
        </button>
        <button onclick="mostrarContainer('containerResumenTurno')" class="btn btn-info flex-fill">
            📊 Ver Resumen del Dia
        </button>
    </div>
</div>
</div>

<div class="containerResumenTurno d-none" id="containerResumenTurno">
            <!-- Logo del local -->
        <div class="logo-container-resumen mb-3">
            <img src="./pngs/LogoLocal.png" alt="Logo El Arrendajo Azul" class="logo-resumen" />
        </div>

    <h1 class="titulo-superior">📊 Resumen del Turno</h1>
    <div id="resumenTurnoContent" class="mt-3 mb-3"></div>
    <div class="d-flex flex-wrap gap-2">
        <button onclick="mostrarContainer('container2')" class="btn btn-primary flex-fill">
            ↩️ Volver a INICIO
        </button>
        <button onclick="cerrarSesion()" class="btn btn-danger flex-fill">
            🚪 Cerrar sesión
        </button>
    </div>
</div>
<div class="containerCompras d-none" id="containerCompras">
    <!-- Logo del local -->
    <div class="logo-container-compras mb-3">
        <img src="./pngs/LogoLocal.png" alt="Logo El Arrendajo Azul" class="logo-compras" />
    </div>

    <h1 class="titulo-superior">🛒 Compras</h1>
    <div id="comprasContent" class="mt-3 mb-3"></div>
    <div class="d-flex flex-wrap gap-2">
        <button onclick="mostrarContainer('container2')" class="btn btn-primary flex-fill">
            ↩️ Volver a INICIO
        </button>
    </div>
</div>
<div class="container3 d-none" id="container3">
    <div id="detalleCuentaContainer"></div>
</div>

    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>    <!-- Script de supresión de errores jQuery/Firebase -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script type="module" src="JavaScript/Engranaje.js"></script>
    <script type="module" src="JavaScript/Cuentas.js"></script>
    <script type="module" src="JavaScript/Export_Import.js"></script>
    <script type="module" src="JavaScript/SincronizadorPrecios.js"></script>
    <script type="module" src="JavaScript/Compras.js"></script>

</body>
</html>